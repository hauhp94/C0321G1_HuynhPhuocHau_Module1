(window["bytedance_secsdk_captcha_jsonp_2.16.35"]=window["bytedance_secsdk_captcha_jsonp_2.16.35"]||[]).push([[2],{436:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}var o=function(t){return t&&t.Math==Math&&t},i=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(e){return!0}},s=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u={f:c&&!l.call({1:2},1)?function(t){var e=c(this,t);return!!e&&e.enumerable}:l},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d={}.toString,h=function(t){return d.call(t).slice(8,-1)},f="".split,v=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==h(t)?f.call(t,""):Object(t)}:Object,m=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return v(m(t))},y=function(t){return"object"===typeof t?null!==t:"function"===typeof t},_=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,w=function(t,e){return b.call(t,e)},S=i.document,E=y(S)&&y(S.createElement),M=!s&&!a(function(){return 7!=Object.defineProperty((t="div",E?S.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),x=Object.getOwnPropertyDescriptor,R={f:s?x:function(t,e){if(t=g(t),e=_(e,!0),M)try{return x(t,e)}catch(n){}if(w(t,e))return p(!u.f.call(t,e),t[e])}},P=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},j=Object.defineProperty,C={f:s?j:function(t,e,n){if(P(t),e=_(e,!0),P(n),M)try{return j(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},H=s?function(t,e,n){return C.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},k=function(t,e){try{H(i,t,e)}catch(n){i[t]=e}return e},L=i["__core-js_shared__"]||k("__core-js_shared__",{}),O=Function.toString;"function"!=typeof L.inspectSource&&(L.inspectSource=function(t){return O.call(t)});var A,T,D,U,I=L.inspectSource,q=i.WeakMap,B="function"===typeof q&&/native code/.test(I(q)),F=r(function(t){(t.exports=function(t,e){return L[t]||(L[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),N=0,J=Math.random(),z=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++N+J).toString(36)},X=F("keys"),Q={},W=i.WeakMap;if(B){var V=L.state||(L.state=new W),G=V.get,$=V.has,Y=V.set;A=function(t,e){return e.facade=t,Y.call(V,t,e),e},T=function(t){return G.call(V,t)||{}},D=function(t){return $.call(V,t)}}else{var K=X[U="state"]||(X[U]=z(U));Q[K]=!0,A=function(t,e){return e.facade=t,H(t,K,e),e},T=function(t){return w(t,K)?t[K]:{}},D=function(t){return w(t,K)}}var Z,tt={set:A,get:T,has:D,enforce:function(t){return D(t)?T(t):A(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=T(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},et=r(function(t){var e=tt.get,n=tt.enforce,r=String(String).split("String");(t.exports=function(t,e,o,a){var s,l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof e||w(o,"name")||H(o,"name",e),(s=n(o)).source||(s.source=r.join("string"==typeof e?e:""))),t!==i?(l?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=o:H(t,e,o)):c?t[e]=o:k(e,o)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||I(this)})}),nt=i,rt=function(t){return"function"==typeof t?t:void 0},ot=Math.ceil,it=Math.floor,at=function(t){return isNaN(t=+t)?0:(t>0?it:ot)(t)},st=Math.min,lt=function(t){return t>0?st(at(t),9007199254740991):0},ct=Math.max,ut=Math.min,pt=function(t){return function(e,n,r){var o,i=g(e),a=lt(i.length),s=function(t,e){var n=at(t);return n<0?ct(n+e,0):ut(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},dt={includes:pt(!0),indexOf:pt(!1)}.indexOf,ht=function(t,e){var n,r=g(t),o=0,i=[];for(n in r)!w(Q,n)&&w(r,n)&&i.push(n);for(;e.length>o;)w(r,n=e[o++])&&(~dt(i,n)||i.push(n));return i},ft=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vt=ft.concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(t){return ht(t,vt)}},gt={f:Object.getOwnPropertySymbols},yt=function(t,e){return arguments.length<2?rt(nt[t])||rt(i[t]):nt[t]&&nt[t][e]||i[t]&&i[t][e]}("Reflect","ownKeys")||function(t){var e=mt.f(P(t)),n=gt.f;return n?e.concat(n(t)):e},_t=function(t,e){for(var n=yt(e),r=C.f,o=R.f,i=0;i<n.length;i++){var a=n[i];w(t,a)||r(t,a,o(e,a))}},bt=/#|\.prototype\./,wt=function(t,e){var n=Et[St(t)];return n==xt||n!=Mt&&("function"==typeof e?a(e):!!e)},St=wt.normalize=function(t){return String(t).replace(bt,".").toLowerCase()},Et=wt.data={},Mt=wt.NATIVE="N",xt=wt.POLYFILL="P",Rt=wt,Pt=R.f,jt=function(t,e){var n,r,o,a,s,l=t.target,c=t.global,u=t.stat;if(n=c?i:u?i[l]||k(l,{}):(i[l]||{}).prototype)for(r in e){if(a=e[r],o=t.noTargetGet?(s=Pt(n,r))&&s.value:n[r],!Rt(c?r:l+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof a===typeof o)continue;_t(a,o)}(t.sham||o&&o.sham)&&H(a,"sham",!0),et(n,r,a,t)}},Ct=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ht=function(t){return Object(m(t))},kt=Array.isArray||function(t){return"Array"==h(t)},Lt=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())}),Ot=Lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,At=F("wks"),Tt=i.Symbol,Dt=Ot?Tt:Tt&&Tt.withoutSetter||z,Ut=(w(At,Z="species")||(Lt&&w(Tt,Z)?At[Z]=Tt[Z]:At[Z]=Dt("Symbol."+Z)),At[Z]),It=function(t,e){var n;return kt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!kt(n.prototype)?y(n)&&null===(n=n[Ut])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},qt=[].push,Bt=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(l,c,u,p){for(var d,h,f=Ht(l),m=v(f),g=Ct(c,u,3),y=lt(m.length),_=0,b=p||It,w=e?b(l,y):n||a?b(l,0):void 0;y>_;_++)if((s||_ in m)&&(h=g(d=m[_],_,f),t))if(e)w[_]=h;else if(h)switch(t){case 3:return!0;case 5:return d;case 6:return _;case 2:qt.call(w,d)}else switch(t){case 4:return!1;case 7:qt.call(w,d)}return i?-1:r||o?o:w}},Ft={forEach:Bt(0),map:Bt(1),filter:Bt(2),some:Bt(3),every:Bt(4),find:Bt(5),findIndex:Bt(6),filterOut:Bt(7)},Nt=Object.defineProperty,Jt={},zt=function(t){throw t},Xt=Ft.forEach,Qt=function(t,e){var n=[][t];return!!n&&a(function(){n.call(null,e||function(){throw 1},1)})}("forEach"),Wt=function(t,e){if(w(Jt,t))return Jt[t];e||(e={});var n=[][t],r=!!w(e,"ACCESSORS")&&e.ACCESSORS,o=w(e,0)?e[0]:zt,i=w(e,1)?e[1]:void 0;return Jt[t]=!!n&&!a(function(){if(r&&!s)return!0;var t={length:-1};r?Nt(t,1,{enumerable:!0,get:zt}):t[1]=1,n.call(t,o,i)})}("forEach"),Vt=Qt&&Wt?[].forEach:function(t){return Xt(this,t,arguments.length>1?arguments[1]:void 0)};jt({target:"Array",proto:!0,forced:[].forEach!=Vt},{forEach:Vt});var Gt,$t,Yt=Function.call;Gt="forEach",Ct(Yt,i["Array"].prototype[Gt],$t);!function(t){var e,n;if(t&&!("href"in(null!==(n=null===(e=t.URL)||void 0===e?void 0:e.prototype)&&void 0!==n?n:{}))){o.prototype={toString:function(){return this.href},get href(){return this._anchorElement.href},set href(t){this._anchorElement.href=t},get protocol(){return this._anchorElement.protocol},set protocol(t){this._anchorElement.protocol=t},get host(){return this._anchorElement.host},set host(t){this._anchorElement.host=t},get hostname(){return this._anchorElement.hostname},set hostname(t){this._anchorElement.hostname=t},get port(){return this._anchorElement.port},set port(t){this._anchorElement.port=t},get pathname(){return this._anchorElement.pathname},set pathname(t){this._anchorElement.pathname=t},get search(){return this._anchorElement.search},set search(t){this._anchorElement.search=t},get hash(){return this._anchorElement.hash},set hash(t){this._anchorElement.hash=t}};var r=t.URL||t.webkitURL||t.mozURL;o.createObjectURL=function(t){return r.createObjectURL(t)},o.revokeObjectURL=function(t){return r.revokeObjectURL(t)},Object.defineProperty(o.prototype,"toString",{enumerable:!1}),t.URL=o}function o(t,e){if(!t)throw new TypeError("Invalid argument");var n=document.implementation.createHTMLDocument("");if(e){var r=n.createElement("base");r.href=e,n.head.appendChild(r)}var o=n.createElement("a");if(o.href=t,n.body.appendChild(o),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o})}}("undefined"!==typeof n?n:"undefined"!==typeof window?window:"undefined"!==typeof self?self:n),function(){if(!Element.prototype.addEventListener){var t=[],e=function(e,n){var r=this,o=function(t){t.target=t.srcElement,t.currentTarget=r,"undefined"!==typeof n.handleEvent?n.handleEvent(t):n.call(r,t)};if("DOMContentLoaded"===e){var i=function(t){"complete"===document.readyState&&o(t)};if(document.attachEvent("onreadystatechange",i),t.push({object:this,type:e,listener:n,wrapper:i}),"complete"===document.readyState){var a=new Event;a.srcElement=window,i(a)}}else this.attachEvent("on"+e,o),t.push({object:this,type:e,listener:n,wrapper:o})},n=function(e,n){for(var r=0;r<t.length;){var o=t[r];if(o.object===this&&o.type===e&&o.listener===n){"DOMContentLoaded"===e?this.detachEvent("onreadystatechange",o.wrapper):this.detachEvent("on"+e,o.wrapper),t.splice(r,1);break}++r}};Element.prototype.addEventListener=e,Element.prototype.removeEventListener=n,HTMLDocument&&!HTMLDocument.prototype.addEventListener&&(HTMLDocument.prototype.addEventListener=e,HTMLDocument.prototype.removeEventListener=n),Window&&!Window.prototype.addEventListener&&(Window.prototype.addEventListener=e,Window.prototype.removeEventListener=n)}}();var Kt=Object.keys||function(t){return ht(t,ft)};jt({target:"Object",stat:!0,forced:a(function(){Kt(1)})},{keys:function(t){return Kt(Ht(t))}});nt.Object.keys;var Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function te(t,e){function n(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ee=function(){return(ee=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function ne(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function re(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function oe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(re(arguments[e]));return t}function ie(t){return"object"===typeof t&&null!==t&&!le(t)}function ae(t){return"function"===typeof t}function se(t){return"[object String]"===Object.prototype.toString.call(t)}function le(t){return"[object Array]"===Object.prototype.toString.call(t)}function ce(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ue(t,e){if(ie(t))for(var n in t)ce(t,n)&&e.call(null,n,t[n])}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0;r<t.length;)n=ve(n,t[r]),r++;return n}var de=Object.getPrototypeOf?Object.getPrototypeOf({}):null;function he(t){return Object.getPrototypeOf?Object.getPrototypeOf(t)===de:t.constructor===Object}function fe(t,e){var n=ee({},t);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(ie(e[r])&&he(e[r])?n[r]=ve(ie(t[r])?t[r]:{},e[r]):le(e[r])?n[r]=e[r].slice():n[r]=e[r]);return n}function ve(t,e){var n=ee({},t);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(ie(e[r])&&he(e[r])?n[r]=ve(ie(t[r])?t[r]:{},e[r]):le(t[r])||le(e[r])?n[r]=me(t[r],e[r]):n[r]=e[r]);return n}function me(t,e){var n=le(t)?t:[],r=le(e)?e:[];return Array.prototype.concat.call(n,r).map(function(t){return t instanceof RegExp?t:le(t)||ie(t)&&he(t)?le(t)?me([],t):ve({},t):t})}function ge(t,e){if(!le(t))return!1;if(0===t.length)return!1;for(var n=0;n<t.length;){if(t[n]===e)return!0;n++}return!1}function ye(){if(!("fetch"in window))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function _e(){return!!ie(window)}function be(){return!(!_e()||!ie(window.performance))&&!!ie(window.performance.timing)}function we(t){var e=function(t){var e={};return ue(t,function(t,n){e[encodeURIComponent(t)]=encodeURIComponent(n)}),e}(function(t){if(!ie(t))return{};var e={};return ue(t,function(t,n){ie(n)||le(n)?e[t]=JSON.stringify(n):e[t]=n}),e}(t)),n=[];return ue(e,function(t,e){n.push(t+"="+e)}),n.join("&")}function Se(t){var e=document.createElement("a");e.href=t;var n=e.pathname||"/";return"/"!==n[0]&&(n="/"+n),{href:e.href,protocol:e.protocol.slice(0,-1),hostname:e.hostname,host:e.host,search:e.search,pathname:n,hash:e.hash}}var Ee=function(t){if(!se(t))return!1;var e=t;return ae(e.toLowerCase)&&(e=e.toLowerCase()),ge(["x-tt-token"],e)};function Me(){}function xe(t){var e="[object String]"===Object.prototype.toString.call(t);return t?e?t.length:ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:window.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function Re(t){if(!t)return"";if(!ae(t.forEach))return"";var e=[];return t.forEach(function(t){if(le(t)&&t[0]&&!Ee(t[0])){var n=t[0],r=t[1]||"";e.push(n+": "+r)}}),e.join("\r\n")}function Pe(t){var e={},n=Se(t);return e.ax_protocol=n.protocol,e.ax_domain=n.hostname,e.ax_path=n.pathname,e.ax_url=(n.href||t).split("?")[0],e}function je(t,e){var n=Se(t),r=Se(e);return n.protocol===r.protocol&&n.host===r.host}function Ce(t){return le(t)&&t.length?function(t){for(var e=[],n=t.length,r=0;r<n;r++){var o=t[r];se(o)?e.push(o.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):o&&o.source&&e.push(o.source)}return new RegExp(e.join("|"),"i")}(t):null}var He=function(t){var e,n;return void 0===t&&(t=window),_e()&&(null===(e=t.screen)||void 0===e?void 0:e.width)&&(null===(n=t.screen)||void 0===n?void 0:n.height)?t.screen.width+"x"+t.screen.height:"0x0"},ke=function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t&&se(t.effectiveType)?t.effectiveType:"unknown"},Le=function(t,e){ae(t)&&(ae(window.addEventListener)&&(window.addEventListener("unload",t),window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t)),ae(document.addEventListener)&&document.addEventListener("visibilitychange",function(n){ae(e)?e(n):"hidden"===document.visibilityState&&t(n)}))};function Oe(t){return!!t&&Math.random()<Number(t)}var Ae=function(){function t(e){var n=this;this.postEvent=function(e){var r=ee(ee({},e),n.getCommonParams());t.post(n.url,r)},this.getEvent=function(e){var r=we(ee(ee({},e),n.getCommonParams())),o=n.url+"?"+r;t.get(o)},this.getURL=function(){return n.url},this.options=e,this.url=this.options.reportURL}return t.post=function(t,e,n){var r,o,i=null!==(r=null===n||void 0===n?void 0:n.success)&&void 0!==r?r:Me,a=null!==(o=null===n||void 0===n?void 0:n.fail)&&void 0!==o?o:Me,s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(e)),s.onload=function(){try{if(this.responseText){var t=JSON.parse(this.responseText);i(t)}else i({})}catch(e){a()}},s.onerror=function(){a()},s.onabort=function(){a()}},t.get=function(t,e){var n,r,o,i,a=null!==(n=null===e||void 0===e?void 0:e.success)&&void 0!==n?n:Me,s=null!==(r=null===e||void 0===e?void 0:e.fail)&&void 0!==r?r:Me,l=null!==(o=null===e||void 0===e?void 0:e.getResponse)&&void 0!==o?o:Me,c=null!==(i=null===e||void 0===e?void 0:e.getResponseText)&&void 0!==i?i:Me,u=new XMLHttpRequest;(null===e||void 0===e?void 0:e.withCredentials)&&(u.withCredentials=e.withCredentials),u.open("GET",t),u.send(),u.onload=function(){l(null===this||void 0===this?void 0:this.response),c(this.responseText);try{if(this.responseText){var t=JSON.parse(this.responseText);a(t)}else a({})}catch(e){s()}},u.onerror=function(){s()},u.onabort=function(){s()}},t.prototype.getCommonParams=function(){return{timestamp:Date.now()}},t}();function Te(t,e,n){if(void 0===n&&(n="0"),n.length>1)throw new TypeError("expect the length of pad to be 1, but got "+t.length);return t.length>=e?t:""+Array.from({length:e-t.length}).fill(n).join("")+t}function De(t){return t?Math.floor(Math.random()*Math.pow(10,12)).toString(16).substr(0,t):""}var Ue="00",Ie=4294967295;function qe(t,e,n){void 0===n&&(n="01");var r=""+Te((Date.now()%Ie).toString(16),8)+function(t){var e;if("number"===typeof t)e=t;else{var n=t.replace(/-/g,"");if(!/^[0-9]+$/.test(n)){if(n.length>18)return"18"+De(18);var r=22-n.length-4;return""+Te(""+n.length,2)+n+De(r)}e=parseInt(n,10)}var o=e.toString(16),i=22-o.length-4;return""+Te(""+o.length,2)+o+De(i)}(t)+("string"===typeof e?De(4):Te(e.toString(16),4));return Ue+"-"+r+"-"+r.substr(0,16)+"-"+n}function Be(){var t=function(){for(var t=new Array(16),e=0,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;return t}();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);var r=0,o=e;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}(t)}var Fe=1,Ne=.1,Je=.1,ze=["/log/sentry/"],Xe=8e3,Qe=4e3,We=Be(),Ve=Be(),Ge=function(){};function $e(t,e){if(void 0===e&&(e=Ge),t&&se(t)&&_e()&&ie(document)&&ae(document.createElement)){var n=document.createElement("script"),r=document.head;ie(n)&&ie(r)&&(n.src=t,n.async=!0,n.crossOrigin="anonymous",n.onload=function(){e()},ae(r.appendChild)&&r.appendChild(n))}}var Ye="AjaxMonitor",Ke=function(){function t(t){this.name=Ye,this.callback=Me,this.traceId=null,this.props=t}return t.prototype.setup=function(t){void 0===t&&(t=Me),ae(XMLHttpRequest)&&(this.callback=t,this.start())},t.prototype.updateConfig=function(t){this.props=pe({},this.props,t)},t.prototype.start=function(){this.hookXMLHttpRequestOpen(),this.hookXMLHttpRequestSend(),this.hookXMLHttpRequestSetRequestHeader()},t.prototype.hookXMLHttpRequestSetRequestHeader=function(){var t=XMLHttpRequest.prototype.setRequestHeader||Me;XMLHttpRequest.prototype.setRequestHeader=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._requestHeaders=this._requestHeaders||[],this._requestHeaders.push(e),t.apply(this,e)}},t.prototype.hookXMLHttpRequestOpen=function(){var t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1];return this._url=o||"",this._method=(null===r||void 0===r?void 0:r.toLowerCase())||"",t.apply(this,e)}},t.prototype.hookXMLHttpRequestSend=function(){var t=this,e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(t.checkAddTrace(this._url)){var i=null!==(n=null===t||void 0===t?void 0:t.props.commonParams)&&void 0!==n?n:{},a=i.bid,s=i.web_id;a&&s&&(t.traceId=qe(s,a),this.setRequestHeader("x-tt-trace-id",t.traceId))}return t.hookXMLHttpRequestOnreadystatechange.call(this,t),this._start=Date.now(),this._data=null===r||void 0===r?void 0:r[0],e.apply(this,r)}},t.prototype.checkAddTrace=function(t){var e,n,r=null!==(e=this.props.commonParams)&&void 0!==e?e:{},o=r.bid,i=r.web_id,a=(null!==(n=this.props.ajaxMonitorOptions)&&void 0!==n?n:{}).sampleHitTrace,s=je(location.href,t);return o&&i&&a&&s},t.prototype.collectErrorRequest=function(){var t,e;return null!==(e=null===(t=this.props.ajaxMonitorOptions)||void 0===t?void 0:t.errorRequestCollect)&&void 0!==e&&e},t.prototype.hookXMLHttpRequestOnreadystatechange=function(t){var e=this.onreadystatechange,n=this;this.onreadystatechange=function(){for(var r,o,i,a,s,l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(4===this.readyState){var p={ev_type:"ajax",ax_status:(this.status||0).toString(),ax_type:n._method,ax_request_header:Re(n._requestHeaders||[]),ax_domain:"",ax_duration:0,ax_path:"",ax_protocol:"",ax_response_header:"",ax_size:0,ax_url:""};if("function"===typeof this.getAllResponseHeaders&&(p.ax_response_header=function(t){if(se(t)){var e=t.split("\r\n"),n=[];return e.forEach(function(t,e){if(t&&ae(t.split)){var r=t.split(": ");n.push([r[0],r[1]])}}),Re(n)}return ie(t)?Re(Object.keys(t).map(function(e){return[e,t[e]]})):t}(this.getAllResponseHeaders())),t.checkAddTrace(n._url)){var d=null!==(r=t.traceId)&&void 0!==r?r:this.getResponseHeader("x-tt-trace-id");d&&(p.trace_id=d,p.trace_host=null!==(o=this.getResponseHeader("x-tt-trace-host"))&&void 0!==o?o:void 0,p.log_id=null!==(i=this.getResponseHeader("x-tt-logid"))&&void 0!==i?i:void 0)}p.ax_duration=Date.now()-n._start,200===this.status&&(p.ax_size=function(t){var e=0;if(""===t.responseType||"text"===t.responseType)e=xe(t.responseText);else if(t.response)e=xe(t.response);else try{e=xe(t.responseText)}catch(n){e=0}return e}(this)),p=ee(ee({},p),Pe(n._url)),t.collectErrorRequest()&&"2"!==p.ax_status[0]&&"3"!==p.ax_status[0]&&(p.ax_request={body:n._data?""+n._data:void 0,search:null===(a=Se(n._url))||void 0===a?void 0:a.search,content_type:null===(l=null===(s=n._requestHeaders)||void 0===s?void 0:s.find(function(t){return"content-type"===t[0].toLowerCase()}))||void 0===l?void 0:l[1]}),ae(t.callback)&&t.callback({name:t.name,type:"get",event:p})}if(e)return e.apply(this,c)}},t.monitorName=Ye,t}();function Ze(t){return t instanceof Request}var tn="FetchMonitor",en=function(){function t(t){this.name=tn,this.callback=Me,this.props=t}return t.prototype.updateConfig=function(t){this.props=pe({},this.props,t)},t.prototype.setup=function(t){void 0===t&&(t=Me),ye()&&(this.callback=t,this.start())},t.prototype.start=function(){ye()&&this.hookFetch()},t.prototype.checkAddTrace=function(t){var e,n,r,o,i=null!==(n=null===(e=this.props)||void 0===e?void 0:e.commonParams)&&void 0!==n?n:{},a=i.bid,s=i.web_id,l=(null!==(o=null===(r=null===this||void 0===this?void 0:this.props)||void 0===r?void 0:r.ajaxMonitorOptions)&&void 0!==o?o:{}).sampleHitTrace,c=je(location.href,t);return a&&s&&l&&c},t.prototype.updateAxRequest=function(t,e,n){var r,o,i;if(this.collectErrorRequest()&&"2"!==t.ax_status[0]&&"3"!==t.ax_status[0]){var a=this.getFetchUrl(e,!0);t.ax_request={body:null===(r=this.getFetchBody(e,n))||void 0===r?void 0:r.toString(),search:se(a)?null===(o=Se(a))||void 0===o?void 0:o.search:void 0,content_type:null===(i=null===n||void 0===n?void 0:n.headers)||void 0===i?void 0:i["Content-Type"]}}},t.prototype.collectErrorRequest=function(){var t,e;return null!==(e=null===(t=this.props.ajaxMonitorOptions)||void 0===t?void 0:t.errorRequestCollect)&&void 0!==e&&e},t.prototype.hookFetch=function(){var t=this,e=this,n=window.fetch;window.fetch=function(r,o){var i;void 0===o&&(o={});var a=t.getFetchUrl(r);if(!function(t){if(!se(t))return!1;var e=re(t.split(":"),2),n=e[0];return!e[1]||"http"===n||"https"===n}(a))return n(r,o);var s=null!==(i=t.props.commonParams)&&void 0!==i?i:{},l=s.bid,c=s.web_id,u=Date.now(),p={ev_type:"ajax"};try{e.checkAddTrace(a)&&(o.headers=new Headers(function(t,e){var n=new Headers;if(Ze(t)&&t.headers&&ae(t.headers.forEach)&&t.headers.forEach(function(t,e){n.append(e,t)}),e.headers){var r=new Headers(e.headers);r.forEach(function(t,e){n.append(e,t)})}return n}(r,o)),l&&c&&(p.trace_id=qe(l,c),o.headers.append("x-tt-trace-id",p.trace_id)))}catch(d){}return p.ax_type=t.getFetchMethod(r,o),p=ee(ee({},p),Pe(a)),n(r,o).then(function(n){var i,s,l;return p.ax_status=(n.status||0).toString(),p.ax_duration=Date.now()-u,p.ax_response_header=e.getAllHeaders(n.headers),p.ax_request_header=e.getAllHeaders(o.headers),n.headers&&ae(n.headers.has)?(n.headers.has("content-length")?p.ax_size=Number(n.headers.get("content-length"))||0:p.ax_size=0,e.checkAddTrace(a)&&(n.headers.has("x-tt-trace-host")&&(p.trace_host=null!==(i=n.headers.get("x-tt-trace-host"))&&void 0!==i?i:void 0),n.headers.has("x-tt-trace-id")&&(p.trace_id=null!==(s=n.headers.get("x-tt-trace-id"))&&void 0!==s?s:void 0),n.headers.has("x-tt-logid")&&(p.log_id=null!==(l=n.headers.get("x-tt-logid"))&&void 0!==l?l:void 0))):p.ax_size=0,t.updateAxRequest(p,r,o),ae(e.callback)&&e.callback({name:e.name,type:"get",event:p}),n},function(n){return p.ax_status="0",p.ax_size=0,p.ax_duration=Date.now()-u,t.updateAxRequest(p,r,o),ae(e.callback)&&e.callback({name:e.name,type:"get",event:p}),Promise.reject(n)})}},t.prototype.getFetchUrl=function(t,e){void 0===e&&(e=!1);var n="";return n=Ze(t)?t.url:t,e||(n=se(n)?n.split("?")[0]:n),n},t.prototype.getFetchMethod=function(t,e){var n,r,o=null!==(n=null===e||void 0===e?void 0:e.method)&&void 0!==n?n:"get";return Ze(t)&&(o=null!==(r=t.method)&&void 0!==r?r:o),o.toLowerCase()},t.prototype.getFetchBody=function(t,e){return Ze(t)?t.body:null===e||void 0===e?void 0:e.body},t.prototype.getAllHeaders=function(t){if(!t||"function"!==typeof t.forEach)return"";var e=[];return t.forEach(function(t,n){e.push([n,t])}),Re(e)},t.monitorName=tn,t}();var nn="FMPMonitor",rn=function(){function t(){var t=this;this.name=nn,this.callback=Me,this.disconnect=function(){var e,n;null===(n=null===(e=t.observer)||void 0===e?void 0:e.disconnect)||void 0===n||n.call(e)},this.getLoadFmp=function(){var e=t.getFmpInternal(),n=e?t.getTimeGap()+e:0,r=t.formatEvent(n);return t.callback(r),r},this.getFmp=function(){var e=t.getFmpInternal(),n=t.formatEvent(e);return t.callback(n),n},this.startTime=Date.now(),this.list=[],this.observer=new MutationObserver(this.count.bind(this))}return t.prototype.setup=function(t){if(_e())return _e()&&"function"===typeof window.MutationObserver?void(ae(document.querySelector)&&(this.callback=t&&ae(t)?t:function(){},this.startTime=Date.now(),this.list=[],ae(this.observer.observe)&&this.observer.observe(document,{childList:!0,subtree:!0}))):null},t.prototype.count=function(){var t=Date.now()-this.startTime,e=document.querySelector("body");e?this.list.push({score:this.score(e,1,!1),time:t}):this.list.push({score:0,time:t})},t.prototype.score=function(t,e,n){var r=0,o=t.tagName;if("SCRIPT"!==o&&"STYLE"!==o&&"META"!==o&&"HEAD"!==o){var i=t.children?t.children.length:0;if(i>0)for(var a=t.children,s=i-1;s>=0;s--)r+=this.score(a[s],e+1,r>0);if(r<=0&&!n){if(!t.getBoundingClientRect||!ae(t.getBoundingClientRect))return 0;var l=t.getBoundingClientRect();if(!l)return 0;if(l.top>window.innerHeight)return 0;if(l.height<=0)return 0}r+=1+.5*e}return r},t.prototype.getFmpInternal=function(){if(!this.observer)return 0;if(this.disconnect(),!this.list.length)return 0;for(var t={time:this.list[0].time,rate:0},e=1;e<this.list.length;e++)if(this.list[e].time>=this.list[e-1].time){var n=this.list[e].score-this.list[e-1].score;t.rate<n&&(t={time:this.list[e].time,rate:n})}return t.time},t.prototype.getTimeGap=function(){return be()?this.startTime-performance.timing.navigationStart:0},t.prototype.formatEvent=function(t){return{name:this.name,type:"post",event:{ev_type:"fmp",fmp:t}}},t.monitorName=nn,t}(),on="PathMonitor",an=function(){function t(){this.name=on,this.callback=Me}return t.prototype.setup=function(t){_e()&&(this.callback=t,this.start())},t.prototype.start=function(){this.monitorHashChange(),_e()&&ie(window.history)&&ae(window.history.pushState)&&ae(window.history.replaceState)&&(this.monitorPushState(),this.monitorReplaceState())},t.prototype.monitorHashChange=function(){var t=this;window.addEventListener("hashchange",function(){var e=t.parseHash(location.hash);e&&t.pathChangeHandler(t.getPath(e),"hash")})},t.prototype.monitorPushState=function(){var t=this,e=window.history.pushState;e&&(window.history.pushState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.handleHistoryStateChange.apply(t,oe(n)),e.apply(this,n)})},t.prototype.monitorReplaceState=function(){var t=this,e=window.history.replaceState;e&&(window.history.replaceState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.handleHistoryStateChange.apply(t,oe(n)),e.apply(this,n)})},t.prototype.pathChangeHandler=function(t,e){se(t)&&ae(this.callback)&&this.callback({name:this.name,type:"get",event:{ev_type:"pageview",path:t,type:e}})},t.prototype.handleHistoryStateChange=function(t,e,n){if(n){var r=this.parseURL(n),o=this.parseURL(location.href);r&&o&&(r.pathname===o.pathname?r.hash!==o.hash&&this.pathChangeHandler(this.getPath(r.hash),"hash"):this.pathChangeHandler(this.getPath(r.pathname),"pathname"))}},t.prototype.parseURL=function(t){if(!t)return null;if("string"!==typeof t)return null;if(t.match(/^\/[^\/]/))return new URL(location.protocol+"//"+location.host+t);try{return new URL(t)}catch(e){return null}},t.prototype.parseHash=function(t){return t?"string"!==typeof t?"/":t.replace(/^#/,""):"/"},t.prototype.getPath=function(t){var e=t&&"string"===typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"";return e=this.parseHash(e)},t.monitorName=on,t}(),sn=function(){function t(){}return t.prototype.sendEvent=function(t){var e=this.getEventToBeSent(t);e&&this.idleSendEvent(e)},t.prototype.getEventToBeSent=function(t){var e=this._modifyEvent(t);if(this._shouldSend(e))return e},t.prototype._modifyEvent=function(t){return t},t.prototype._shouldSend=function(t){return!0},t.prototype._send=function(t){},t.prototype.idleSendEvent=function(t){this._send(t)},t}(),ln=10,cn=1e3,un=function(t){function e(e){var n,r,o=t.call(this)||this;return o.reportQueue=[],o.isReady=!0,o.batchReportLength=null!==(n=e.maxBatchReportLength)&&void 0!==n?n:ln,o.batchReportWait=null!==(r=e.batchReportWait)&&void 0!==r?r:cn,o.batchReportTimeout=null,o}return te(e,t),Object.defineProperty(e.prototype,"ready",{get:function(){return this.isReady},set:function(t){this.isReady=t,this.isReady&&this._uploadQueue()},enumerable:!1,configurable:!0}),e.prototype._send=function(t){var e=this,n=this.buildParams(t);null===n||function(t){return void 0===t}(n)||(this.reportQueue.push(n),this.isReady&&(this.reportQueue.length>=this.batchReportLength&&this._uploadQueue(),this.batchReportTimeout&&clearTimeout(this.batchReportTimeout),this.batchReportTimeout=setTimeout(function(){e._uploadQueue()},this.batchReportWait)))},e.prototype._uploadQueue=function(){if(this.reportQueue.length&&this.ready){var t={ev_type:"batch",list:this.reportQueue};this.reportQueue=[],this._request({event:t,type:"post"})}},e.prototype._request=function(t){},e}(sn),pn="https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins",dn=pn+"/sentry.3.6.9.maliva.js",hn=pn+"/behavior.3.6.9.maliva.js",fn="mon-va.byteoversea.com";function vn(t){return!!t&&Math.random()<Number(t)}function mn(t,e){return ie(t)?ie(e)?ee(ee({},t),{overrides:e}):t:{}}var gn=function(t){return"https://"+(null!==t&&void 0!==t?t:fn)+"/log/sentry/v2/api/slardar/main/"},yn=function(t){return"https://"+(null!==t&&void 0!==t?t:fn)+"/log/sentry/v2/api/slardar/batch/"},_n=function(t){return"https://"+(null!==t&&void 0!==t?t:fn)+"/slardar/sdk_setting"};function bn(t){return"error"===t.type}function wn(t){return"unhandledrejection"===t.type}function Sn(t){var e,n,r;if((null===(e=window.__SLARDAR__)||void 0===e?void 0:e.plugins)&&le(null===(n=window.__SLARDAR__)||void 0===n?void 0:n.plugins)){var o=null===(r=window.__SLARDAR__)||void 0===r?void 0:r.plugins,i=void 0;return o.forEach(function(e){e.version===t.version&&e[t.name]&&(i=e[t.name])}),i}}var En=Object.freeze({__proto__:null,isHitBySampleRate:vn,rebuildSendData:mn,getSingleReportURL:gn,getBatchReportURL:yn,getSettingURL:_n,isErrorEvent:bn,isPromiseRejectionEvent:wn,getMonitors:function(t,e){var n;return t.forEach(function(t){t.name===e&&(n=t)}),n},addPlugin:function(t){var e,n;if(window.__SLARDAR__||(window.__SLARDAR__={}),window.__SLARDAR__){var r=t.plugin.version,o=((e={version:r})[t.pluginName]=t.plugin,e),i=null!==(n=window.__SLARDAR__.plugins)&&void 0!==n?n:[],a=[],s=!1;i.forEach(function(e){e.version===r&&("SetMonitors"!==t.pluginName||e.SetMonitors||(e[t.pluginName]=t.plugin),"SetSentryMonitors"!==t.pluginName||e.SetSentryMonitors||(e[t.pluginName]=t.plugin),s=!0),a.push(e)}),s||a.push(o),window.__SLARDAR__.plugins=a}},getPlugin:Sn}),Mn=function(t){function e(e){var n,r=t.call(this,null!==e&&void 0!==e?e:{reportURL:""})||this;return r.setTransport=function(){r.transport||(r.transport=new Ae({reportURL:r.getReportURL()}),r.updateStatus())},r.uploadQueue=function(){r._uploadQueue()},r.updateConfig=function(t){var e,n,o,i=null===(n=null===(e=r.options)||void 0===e?void 0:e.commonParams)||void 0===n?void 0:n.pid;r.options=r.normalizeOptions(t),i&&(null===(o=null===t||void 0===t?void 0:t.commonParams)||void 0===o?void 0:o.pid)&&t.commonParams.pid!==i&&r.sendPageview()},r.sendPageview=function(){ae(r.sendEvent)&&r.sendEvent({name:"PageViewMonitor",type:"get",event:{ev_type:"pageview"}})},r.sendEvent=function(e){r.chechIsReady()?t.prototype.sendEvent.call(r,e):r.preQueue.push(e)},r.reportURL=null!==(n=null===e||void 0===e?void 0:e.reportURL)&&void 0!==n?n:"",r.preQueue=[],r.clientStatus=0,r.enable=!1,r}return te(e,t),e.prototype.setEnable=function(t){this.enable||(this.enable=t,this.enable&&this.updateStatus())},Object.defineProperty(e.prototype,"contextAgent",{get:function(){var t=this,e={set:function(n,r){return t.options?(t.options.commonParams.context||(t.options.commonParams.context={}),t.options.commonParams.context[n]=r,e):e},delete:function(n){var r;return(null===(r=t.options)||void 0===r?void 0:r.commonParams.context)&&"string"!==typeof t.options.commonParams.context&&ce(t.options.commonParams.context,n)&&delete t.options.commonParams.context[n],e},clear:function(){return t.options?(t.options.commonParams.context={},e):e},get:function(e){var n,r,o;return null===(o=null===(r=null===(n=t.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)||void 0===o?void 0:o[e]},toObject:function(){var e,n,r;return"string"===typeof(null===(e=t.options)||void 0===e?void 0:e.commonParams.context)?{}:ee({},null===(r=null===(n=t.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)}};return e},enumerable:!1,configurable:!0}),e.prototype._shouldSend=function(t){var e,n;if(!(null===(e=this.options)||void 0===e?void 0:e.monitors)||!t||!ie(t)||!(null===(n=t.event)||void 0===n?void 0:n.ev_type))return!1;var r=this.options.monitors;if("AjaxMonitor"===t.name||"FetchMonitor"===t.name){var o=Ce(ze||[]);if(o&&o.test(t.event.ax_url))return!1}return!!r.BaseMonitor.webIDHit||!!r.BaseMonitor.sampleHit&&("PathMonitor"===t.name?Rn({sendParams:t,pageViewMonitor:r.PageViewMonitor,baseMonitor:r.BaseMonitor}):"PageViewMonitor"===t.name?Pn({pageViewMonitor:r.PageViewMonitor}):"AjaxMonitor"===t.name||"FetchMonitor"===t.name?xn({sendParams:t,ajaxMonitor:r.AjaxMonitor}):"PerformanceMonitor"===t.name?jn({performanceMonitor:r.PerformanceMonitor}):"EmitMonitor"===t.name?Cn({sendParams:t,flexibleMonitor:r.FlexibleMonitor}):"StaticErrorMonitor"===t.name?Hn({sendParams:t,staticErrorMonitor:r.StaticErrorMonitor}):"HijackMonitor"===t.name?kn({hijackMonitor:r.HijackMonitor}):"JSErrorMonitor"!==t.name||Ln({jsErrorMonitor:r.JSErrorMonitor}))},e.prototype._modifyEvent=function(t){var e;if(!(null===(e=this.options)||void 0===e?void 0:e.monitors)||!t||!ie(t))return{};var n=this.options.monitors;return"PerformanceMonitor"===t.name?On({sendParams:t,performanceMonitor:n.PerformanceMonitor}):"PathMonitor"===t.name?An({sendParams:t,baseMonitor:n.BaseMonitor,effect:this.updateConfig}):t},e.prototype.buildParams=function(t){var e,n,r,o,i,a=t.event||{},s=t.overrides,l=ee({},null!==(n=null===(e=this.options)||void 0===e?void 0:e.commonParams)&&void 0!==n?n:{});if(ie(null===s||void 0===s?void 0:s.context)){var c=ee(ee({},null!==(r=ie(l.context)&&l.context)&&void 0!==r?r:{}),null!==(o=null===s||void 0===s?void 0:s.context)&&void 0!==o?o:{});l.context=c}var u=ee(ee(ee({},a),null!==l&&void 0!==l?l:{}),a);return u=this.normalizeEvent(u),(null===(i=this.options)||void 0===i?void 0:i.custom)&&ae(this.options.custom.beforeSend)&&(u=this.options.custom.beforeSend(u||{})),u},e.prototype._request=function(t){var e;if(t&&t.event){var n=t.type,r=t.event;if("beacon"===(null===(e=this.options)||void 0===e?void 0:e.commonParams.report_type)&&navigator&&navigator.sendBeacon){var o=JSON.stringify(r);navigator.sendBeacon(this.getReportURL(),o)}else this.transport&&("get"!==n?"post"===n&&this.transport.postEvent(r):this.transport.getEvent(r))}},e.prototype.chechIsReady=function(){return 2===this.clientStatus},e.prototype.updateStatus=function(){var e=this;switch(this.clientStatus){case 0:this.clientStatus=1;break;case 1:if(this.clientStatus=2,!this.preQueue.length)return;this.preQueue.forEach(function(n){t.prototype.sendEvent.call(e,n)}),this.preQueue=[]}},e.prototype.getBatchReportURL=function(){var t;return"https://"+(null===(t=this.options)||void 0===t?void 0:t.commonParams.report_domain)+"/log/sentry/v2/api/slardar/batch/"},e.prototype.getReportURL=function(){return this.reportURL||this.getBatchReportURL()},e.prototype.normalizeOptions=function(t){var e;return pe({},null!==(e=this.options)&&void 0!==e?e:{},t)},e.prototype.normalizeEvent=function(t){var e=ee(ee({},t),{url:window.location.href});return ie(t.context)&&(e.context=JSON.stringify(t.context)),e||{}},e}(un);function xn(t){var e=t.sendParams,n=t.ajaxMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.whitelistUrls;if(le(r)&&r.length>0){var o=Ce(n.whitelistUrls||[]);return!(!o||!o.test(e.event.ax_url))}var i=Ce(n.ignore||[]);if(i&&i.test(e.event.ax_url))return!1;var a=n.statusCodeSample;if(a&&ce(a,e.event.ax_status))return vn(a[e.event.ax_status]);var s=n.requestUrlSample;if(s){var l=!1,c=!1;if(s.forEach(function(t){if(!l){var n=Ce([t.url]);(null===n||void 0===n?void 0:n.test(e.event.ax_url))&&(l=!0,c=vn(t.sampleRate))}}),l)return c}return!0}function Rn(t){var e=t.sendParams,n=t.pageViewMonitor,r=t.baseMonitor;return 1===r.appTypeSetting.type&&e.event.type===r.appTypeSetting.SPA&&(!n||(!!n.webIDHit||!!n.sampleHit))}function Pn(t){var e=t.pageViewMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function jn(t){var e=t.performanceMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function Cn(t){var e=t.sendParams,n=t.flexibleMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.eventNameHit;if(r){var o=e.event.flexible_data_list[0].event_name;if(r&&ce(r,o))return vn(r[o])}return!0}function Hn(t){var e=t.sendParams,n=t.staticErrorMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=Ce(n.ignore||[]);return!r||!r.test(e.event.st_src)}function kn(t){var e=t.hijackMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function Ln(t){var e=t.jsErrorMonitor;return!e||(!!e.webIDHit||!!e.sampleHit)}function On(t){var e,n=t.sendParams,r=t.performanceMonitor;if(!r)return n;if(!be())return{};if(n.event.isAsync)e=n.event.load>r.spaSlowSessionTime;else{var o=window.performance.timing;e=o.loadEventEnd-o.navigationStart>r.slowSessionTime}if(n.event.resources&&le(n.event.resources)){var i=Ce(r.geckoUrls||[]);n.event.resources.forEach(function(t,e){var r,o,a,s;(null===(r=n.event.resources)||void 0===r?void 0:r[e])&&ie(null===(o=n.event.resources)||void 0===o?void 0:o[e])&&ae(null===(a=n.event.resources)||void 0===a?void 0:a[e].toJSON)&&(n.event.resources[e]=null===(s=n.event.resources)||void 0===s?void 0:s[e].toJSON(),n.event.resources[e].is_gecko=i&&i.test(t.name||"")?"1":"0")})}return r.webIDHitStaticResource||r.sampleHitStaticResource?n.event.upload_reason="sample":e?n.event.upload_reason="slow_session":(delete n.event.resources,n.event.has_resource=0),n}function An(t){var e=t.sendParams,n=t.baseMonitor,r=t.effect;return 1===n.appTypeSetting.type&&n.appTypeSetting.SPA===e.event.type&&(r({commonParams:{pid:e.event.path}}),delete e.event.type,delete e.event.path),{}}var Tn=Object.freeze({__proto__:null,BrowserClient:Mn,shouldSendAjaxEvent:xn,shouldSendPathEvent:Rn,shouldSendPageViewEvent:Pn,shouldSendPerformanceEvent:jn,shouldSendFlexibleEvent:Cn,shouldSendStaticErrorEvent:Hn,shouldSendHijackEvent:kn,shouldSendJSErrorEvent:Ln,modifyPerformanceEvent:On,modifyPathEvent:An}),Dn=function(){var t="";return(null===document||void 0===document?void 0:document.cookie)&&(t=function(t,e){var n,r;if(!t||!e)return"";var o=t.split(";"),i={};try{for(var a=ne(o),s=a.next();!s.done;s=a.next()){var l=s.value.split("="),c=se(l[0])&&l[0].trim();c&&se(l[1])&&(i[c]=l[1].trim())}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i[e]||""}(document.cookie,"MONITOR_WEB_ID")),t};function Un(t){return pe({},{commonParams:{version:"",hostname:window.location.hostname,protocol:window.location.protocol.slice(0,-1),url:window.location.href,slardar_session_id:We,sample_rate:Fe,pid:location.pathname,report_domain:fn,screen_resolution:He(),network_type:ke(),bid:"",context:{},slardar_web_id:Dn()||Ve,report_type:"xhr",performanceAuto:!0,reportURLSingle:"",region:"cn",env:"production"},flags:{hookPath:!0,hookXHR:!0,hookFetch:!0,enableSizeStats:!0,enableFMP:!0,enablePerformance:!0,enableResourcePerformance:!0,enableStaticError:!0,enableCatchJSError:!0,enableCatchGlobalJSError:!0,enableCatchJSErrorV2:!1,enableCrash:!0,enableMemoryRecord:!0,enableFPSJankTimesMonitor:!0,enableBreadcrumb:!0,hookConsole:!1,hookDom:!0},monitors:{BaseMonitor:{appTypeSetting:{type:0,SPA:"",renderType:0},webIDHit:!1,sampleHit:Oe(1)},PageViewMonitor:{webIDHit:!1,sampleHit:Oe(1)},JSErrorMonitor:{webIDHit:!1,sampleHit:Oe(1),webIDHitBehavior:Oe(0),sampleHitBehavior:Oe(0),ignoreErrors:[],whitelistUrls:[],blacklistUrls:[],download_link:""},AjaxMonitor:{webIDHit:!1,sampleHit:Oe(1),sampleHitTrace:Oe(0),ignore:ze,abort:!1,whitelistUrls:[],statusCodeSample:{},requestUrlSample:[],errorRequestCollect:!1},PerformanceMonitor:{webIDHit:!1,sampleHit:Oe(1),webIDHitStaticResource:!1,sampleHitStaticResource:Oe(Ne),slowSessionTime:Xe,spaSlowSessionTime:Qe,geckoUrls:[],interval:0,checkPoint:[]},FlexibleMonitor:{webIDHit:!1,sampleHit:Oe(1),eventNameHit:{},eventNameSampleHit:Oe(1)},StaticErrorMonitor:{webIDHit:!1,sampleHit:Oe(1),ignore:ze},HijackMonitor:{webIDHit:!1,sampleHit:Oe(Je)}},plugins:{render:{enable:0},spa:{enable:0,type:""},behavior:{enable:0,slardar_web_ids:[],sample_rate:0,download_link:hn},sentry:{enable:0,behavior_enable:0,behavior_sample_rate:0,behavior_slardar_web_ids:[],download_link:dn}},custom:{beforeSend:function(t){return t}}},t)}var In=Object.freeze({__proto__:null,getSlardarWebId:Dn,getDefaultBaseClientConfigFlags:function(){return{hookPath:!0,hookXHR:!0,hookFetch:!0,enableSizeStats:!0,enableFMP:!0,enablePerformance:!0,enableStaticError:!0,enableCatchJSError:!0,enableCrash:!0,enableMemoryRecord:!0,enableFPSJankTimesMonitor:!0,enableBreadcrumb:!0,hookConsole:!1,hookDom:!0}},getDefaultBaseClientConfig:Un}),qn=function(t,e){var n=!1;return t?(t.forEach(function(t){n||!t.condition.is_default&&"slardar_web_id"===t.condition.field&&ge(t.condition.values,e.web_id)&&(n=!0)}),n):n},Bn=function(t){var e=!1;return!t||(t.forEach(function(t){t.condition.field&&e||(e=vn(Number(t.value)))}),e)},Fn=function(t){var e=[];if(t)try{e=JSON.parse(t)}catch(n){e=[]}return e},Nn=function(t){var e=[];return t.forEach(function(t){if(t.value){var n=Fn(t.value);e.push.apply(e,oe(n))}}),e},Jn=function(t,e){var n,r;void 0===e&&(e=!1);try{for(var o=ne(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.value)return"true"===a.value}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e},zn=function(t){var e=[];return t.forEach(function(t){"pid"===t.condition.field.toLowerCase()&&"like"===t.condition.op.toLowerCase()&&t.value?e.push({pids:Fn(t.value),value:parseInt(t.value,10),isDefault:!1}):t.condition.is_default&&e.push({pids:[],value:parseInt(t.value,10),isDefault:!0})}),e},Xn=function(t,e){var n={},r=[];return t.forEach(function(t){t.condition.field===e&&t.condition.values&&t.condition.values.forEach(function(e){ce(n,e)||(n[e]=Number(t.value)||0,r.push({url:e,sampleRate:n[e]}))})}),{flatten:n,list:r}},Qn=function(t){var e,n,r=t.setting,o=t.info,i=pe({PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{appTypeSetting:{}}},r.monitors);r.ajaxWhitelistUrls&&le(r.ajaxWhitelistUrls)&&(i.AjaxMonitor.whitelistUrls=(i.AjaxMonitor.whitelistUrls||[]).concat(r.ajaxWhitelistUrls)),r.ignoreAjax&&le(r.ignoreAjax)&&(i.AjaxMonitor.ignore=(i.AjaxMonitor.ignore||[]).concat(r.ignoreAjax)),ce(r,"geckoUrls")&&(i.PerformanceMonitor.geckoUrls=r.geckoUrls),r.ignoreStatic&&le(r.ignoreStatic)&&(i.StaticErrorMonitor.ignore=(i.StaticErrorMonitor.ignore||[]).concat(r.ignoreStatic)),(null===(e=r.plugins)||void 0===e?void 0:e.sentry)&&(i.JSErrorMonitor=ee(ee({},i.JSErrorMonitor||{}),r.plugins.sentry)),r.errorRelease&&(i.JSErrorMonitor.release=r.errorRelease),r.ignoreErrors&&le(r.ignoreErrors)&&(i.JSErrorMonitor.ignoreErrors=r.ignoreErrors),r.errorBlacklistUrls&&le(r.errorBlacklistUrls)&&(i.JSErrorMonitor.blacklistUrls=r.errorBlacklistUrls),r.errorWhitelistUrls&&le(r.errorWhitelistUrls)&&(i.JSErrorMonitor.whitelistUrls=r.errorWhitelistUrls),ce(r,"sampleRate")&&(i.BaseMonitor.sampleHit=vn(r.sampleRate));var a=r.plugins;if(a&&ie(a)){if(ce(a,"spa")){var s=a.spa;s&&ce(s,"enable")&&(i.BaseMonitor.appTypeSetting.type=Number(s.enable)),s&&ce(s,"type")&&(i.BaseMonitor.appTypeSetting.SPA=s.type)}if(a.render){var l=null===(n=r.plugins)||void 0===n?void 0:n.render;if(l&&ie(l)&&ce(l,"enable")){var c=[{pids:[],value:l.enable,isDefault:!0}];i.BaseMonitor.appTypeSetting.renderType=Yn({renderRules:c,pid:o.pid})}}}return i},Wn=function(t){var e;return void 0===t&&(t={}),pe({sentry:{},behavior:{},spa:{},render:{}},null!==(e=t.plugins)&&void 0!==e?e:{})},Vn=function(t){var e;void 0===t&&(t={});var n=pe({},null!==(e=t.commonParams)&&void 0!==e?e:{});if(!ie(t))return n;var r=["bid","context","pid","slardar_web_id","slardar_session_id","performanceAuto","report_type","region","env"];return ue(t,function(t,e){ge(r,t)&&("report_domain"===t&&"mon-va.byteoversea.com"===e?n.region="maliva":n[t]=e)}),ue({cookieid:"slardar_web_id",sampleRate:"sample_rate",reportDomain:"report_domain",domain:"report_domain",sample_rate:"sample_rate",slardar_web_id:"slardar_web_id"},function(e,r){ce(t,e)&&(n[r]=t[e])}),n.slardar_web_id&&(n.slardar_web_id=n.slardar_web_id.toString()),n},Gn=function(t){var e;void 0===t&&(t={});var n=pe({},null!==(e=t.flags)&&void 0!==e?e:{});if(!ie(t))return n;var r=["hookPath","hookXHR","hookFetch","enableSizeStats","enableFMP","enablePerformance","enableStaticError","enableCatchJSError","enableCatchJSErrorV2","enableCatchGlobalJSError","enableResourcePerformance","enableCrash","enableMemoryRecord","enableFPSJankTimesMonitor","enableBreadcrumb","hookConsole","hookDom"];return ue(t,function(t,e){ge(r,t)&&(n[t]=e)}),n};function $n(t,e){var n,r,o,i,a,s,l={PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{}},c=t.setting;if((null===(r=null===(n=c.page_view)||void 0===n?void 0:n.enable_rate)||void 0===r?void 0:r.length)&&(l.PageViewMonitor.webIDHit=qn(c.page_view.enable_rate,e),l.PageViewMonitor.sampleHit=Bn(c.page_view.enable_rate)),c.jserr&&((null===(o=c.jserr.enable_rate)||void 0===o?void 0:o.length)&&(l.JSErrorMonitor.webIDHit=qn(c.jserr.enable_rate,e),l.JSErrorMonitor.sampleHit=Bn(c.jserr.enable_rate)),c.jserr.ignore_errors&&(l.JSErrorMonitor.ignoreErrors=Nn(c.jserr.ignore_errors)),c.jserr.blacklist_urls&&(l.JSErrorMonitor.blacklistUrls=Nn(c.jserr.blacklist_urls)),c.jserr.whitelist_urls&&(l.JSErrorMonitor.whitelistUrls=Nn(c.jserr.whitelist_urls))),c.ajax&&(c.ajax.enable_rate&&(l.AjaxMonitor.webIDHit=qn(c.ajax.enable_rate,e),l.AjaxMonitor.sampleHit=Bn(c.ajax.enable_rate)),c.ajax.request_sample_rate&&(l.AjaxMonitor.statusCodeSample=Xn(c.ajax.request_sample_rate,"status_code").flatten,l.AjaxMonitor.requestUrlSample=Xn(c.ajax.request_sample_rate,"request_url").list),c.ajax.trace_rate&&(l.AjaxMonitor.sampleHitTrace=Bn(c.ajax.trace_rate)),c.ajax.enable_request_param_collect_on_error&&(l.AjaxMonitor.errorRequestCollect=Jn(c.ajax.enable_request_param_collect_on_error))),(null===(i=c.static_resource)||void 0===i?void 0:i.enable_rate)&&(l.PerformanceMonitor.webIDHitStaticResource=qn(c.static_resource.enable_rate,e),l.PerformanceMonitor.sampleHitStaticResource=Bn(c.static_resource.enable_rate)),(null===(a=c.performance)||void 0===a?void 0:a.enable_rate)&&(l.PerformanceMonitor.webIDHit=qn(c.performance.enable_rate,e),l.PerformanceMonitor.sampleHit=Bn(c.performance.enable_rate)),c.flexible&&(c.flexible.enable_rate&&(l.FlexibleMonitor.webIDHit=qn(c.flexible.enable_rate,e),l.FlexibleMonitor.sampleHit=Bn(c.flexible.enable_rate)),c.flexible.event_name_sample_rate&&(l.FlexibleMonitor.eventNameHit=Xn(c.flexible.event_name_sample_rate,"event_name").flatten,l.FlexibleMonitor.eventNameSampleHit=Bn(c.flexible.event_name_sample_rate))),(null===(s=c.static_err)||void 0===s?void 0:s.enable_rate)&&(l.StaticErrorMonitor.webIDHit=qn(c.static_err.enable_rate,e),l.StaticErrorMonitor.sampleHit=Bn(c.static_err.enable_rate)),c.general){var u=c.general.app_type_setting;if(u){var p={type:Number(u.app_type[0].value),SPA:u.app_type_spa[0].value,renderType:Yn({renderRules:zn(u.app_render_type),pid:e.pid})};l.BaseMonitor.appTypeSetting=p}}var d=t.whitelist;return le(d)&&d.forEach(function(t){e.web_id===t&&(l.BaseMonitor.webIDHit=!0,l.AjaxMonitor.sampleHitTrace=!0)}),l}function Yn(t){var e=t.renderRules,n=t.pid;if(!e||!n)return 0;for(var r=0;r<e.length;r++){var o=e[r];if(le(o.pids)&&o.pids.length>0){var i=Ce(o.pids);if(i&&i.test(n))return o.value}if(o.isDefault&&r===e.length-1)return o.value}return 0}var Kn=Object.freeze({__proto__:null,convertUserSettingToMonitors:Qn,getClientPluginsSetting:Wn,convertUserSettingToCommonParams:Vn,convertUserSettingToFlags:Gn,convertServerSettingToMonitors:$n}),Zn=function(){function t(){var t=this;this.version="3.6.9",this.instance=function(){for(var e,n,r,o,i,a,s,l,c,u,p,d,h,f,v,m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];switch(m[0]){case"init":return void t.init(m[1]);case"config":return void t.config(m[1]);case"sendCustomCountLog":case"sendCustomTimeLog":case"emit":case"send":return void(t.shared.monitors.EmitMonitor?(e=t.shared.monitors.EmitMonitor).handOut.apply(e,oe(m)):t.instance("precollect","emit",m));case"precollect":var y=t.shared.collect,_={pid:t.finalConfig.commonParams.pid,url:t.finalConfig.commonParams.url,context:t.finalConfig.commonParams.context};if("sentry"===m[1])return void y.sentry.push({event:m[2],params:_});if("exception"===m[1]){var b=ee(ee({},ie(_.context)&&_.context),null===(n=m[3])||void 0===n?void 0:n.context);return _.context=b,void y.exception.push({exception:m[2],params:_})}if("error"===m[1]){if(!m[2]||!m[2][0])return;var w=m[2][0]||{};return bn(w)&&((w.error||w.message)&&y.jsError.push({event:w,params:_}),(null===(r=w.target)||void 0===r?void 0:r.tagName)&&y.staticError.push({event:w,params:_})),void(wn(w)&&y.jsError.push({event:w,params:_}))}return void("emit"===m[1]&&y.emit.push({event:m[2],params:_}));case"Sentry":var S=m[1];if(ae(S)){var E=null===(i=null===(o=t.shared.monitors)||void 0===o?void 0:o.JSErrorMonitor)||void 0===i?void 0:i.getSentry();E?S(E):t.instance("precollect","sentry",m[1])}return;case"report":return void(t.client&&t.client.uploadQueue());case"performanceSend":return void(null===(l=null===(s=null===(a=t.shared.monitors)||void 0===a?void 0:a.PerformanceMonitor)||void 0===s?void 0:s.send)||void 0===l||l.call(s));case"performanceInit":return void(null===(p=null===(u=null===(c=t.shared.monitors)||void 0===c?void 0:c.PerformanceMonitor)||void 0===u?void 0:u.initAsync)||void 0===p||p.call(u));case"captureException":if(t.shared.monitors.JSExceptionMonitor){var M=mn(t.shared.monitors.JSExceptionMonitor.buildEvent(m[1]),null!==(d=m[2])&&void 0!==d?d:{});null===(f=null===(h=t.client)||void 0===h?void 0:h.sendEvent)||void 0===f||f.call(h,M)}else t.instance("precollect","exception",m[1],m[2]);return;case"context":return void(t.client&&(null===(v=m[1])||void 0===v||v.call(m,t.client.contextAgent)));default:return}},this.changeReortType=function(e){var n;t.finalConfig.commonParams.report_type=e,null===(n=t.client)||void 0===n||n.updateConfig(t.finalConfig)},this.onClose=function(){Le(t.onCloseReport,t.visibilityChange)},this.visibilityChange=function(){"hidden"===document.visibilityState&&t.onCloseReport(),"visible"===document.visibilityState&&t.changeReortType("xhr")},this.onCloseReport=function(){var e;t.changeReortType("beacon"),null===(e=t.client)||void 0===e||e.uploadQueue()},this.defaultClientConfig=Un({commonParams:{version:this.version}}),this.finalConfig=Un({commonParams:{version:this.version}}),this.client=void 0,this.userConfig={},this.inited=!1,this.configed=!1,this.shared={config:this.finalConfig,instance:[],collect:{sentry:[],jsError:[],staticError:[],emit:[],exception:[]},monitors:{}},this.baseParams={bid:this.shared.config.commonParams.bid||"",pid:this.shared.config.commonParams.pid||""},this.serverSetting=this.__SLARDAR__REPALCE__HOLDER__,this.saveInstance()}return t.prototype.handleUserConfig=function(t){var e;this.userConfig=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0;r<t.length;)n=fe(n,t[r]),r++;return n}(this.userConfig,t),(null===(e=this.userConfig)||void 0===e?void 0:e.onlyUseLocalSetting)&&(this.serverSetting={}),this.mergeSettings()},t.prototype.setBaseParams=function(){this.baseParams.bid=this.shared.config.commonParams.bid||"",this.baseParams.pid=this.shared.config.commonParams.pid||""},t.prototype.init=function(t){this.handleUserConfig(t);var e=this.finalConfig;if(!this.inited){this.inited=!0,this.client=new Mn({reportURL:yn(e.commonParams.report_domain)});var n=this.setMonitors();this.setupMonitors(n),this.shared.instance&&le(this.shared.instance)&&this.shared.instance.push(e.commonParams.bid),this.getServerSetting(e.commonParams.bid),this.onClose()}},t.prototype.config=function(t){var e;if(this.configed=!0,this.inited){this.handleUserConfig(t);var n=this.finalConfig;null===(e=this.client)||void 0===e||e.updateConfig(n)}else this.init(t);this.tryUnlockClient()},t.prototype.getServerSetting=function(t){var e=this;if(this.serverSetting)this.handleServerSetting();else{var n=_n(this.finalConfig.commonParams.report_domain)+"?bid="+t;Ae.get(n,{success:function(t){try{e.serverSetting=t.data||{},e.handleServerSetting()}catch(n){e.handleServerSetting()}},fail:function(){e.handleServerSetting()},withCredentials:!0})}},t.prototype.setMonitors=function(){var t,e=this,n=[],r=this.finalConfig.flags,o=this.finalConfig.commonParams;return r.hookPath&&n.push(new an),r.hookXHR&&n.push(new Ke({commonParams:{web_id:o.slardar_web_id,bid:o.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),r.hookFetch&&n.push(new en({commonParams:{web_id:o.slardar_web_id,bid:o.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),r.enableFMP&&n.push(new rn),(null===(t=this.shared)||void 0===t?void 0:t.monitors)&&n.forEach(function(t){e.shared.monitors[t.name]=t}),n},t.prototype.setupMonitors=function(t){var e=this;this.client&&this.client.sendEvent&&t.forEach(function(t){var n;"FMPMonitor"===t.name?e.finalConfig.flags.enableFMP&&t.setup(Me):t.setup(null===(n=e.client)||void 0===n?void 0:n.sendEvent)})},t.prototype.shouldSetClientEnable=function(){return"production"===this.finalConfig.commonParams.env},t.prototype.tryUnlockClient=function(){var t;null===(t=this.client)||void 0===t||t.setEnable(this.shouldSetClientEnable()&&this.configed&&!!this.serverSetting)},t.prototype.handleServerSetting=function(){var t,e;this.mergeSettings();var n=this.finalConfig;this.client.updateConfig(n),this.client.setTransport(),this.tryUnlockClient(),this.client.sendPageview(),this.shared.transport=this.client.transport,this.shared.sendEvent=this.client.sendEvent.bind(this.client),this.setCookie(n.commonParams.slardar_web_id),null===(t=this.shared.monitors.FetchMonitor)||void 0===t||t.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),null===(e=this.shared.monitors.AjaxMonitor)||void 0===e||e.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),this.loadMonitors(),n.flags.enableCatchJSError&&this.loadSentry()},t.prototype.loadSentry=function(){var t=this;$e(dn,function(){var e=Sn({name:"SetSentryMonitors",version:t.version});if(e){var n=new e({hookConsole:t.finalConfig.flags.hookConsole,hookDom:t.finalConfig.flags.hookDom,memoryRecordMonitor:t.shared.monitors.MemoryRecordMonitor,collect:t.shared.collect,sendEvent:t.client.sendEvent,jsErrorOptions:t.shared.config.monitors.JSErrorMonitor});n.init(),t.shared.monitors=ee(ee({},t.shared.monitors),n.getInstalledMonitors())}})},t.prototype.loadMonitors=function(){var t=this;$e("https://sf16-scmcdn-va.ibytedtos.com/goofy/slardar/fe/sdk/plugins/monitors.3.6.9.maliva.js",function(){var e,n=Sn({name:"SetMonitors",version:t.version});if(n)try{var r=new n({config:t.finalConfig,fmpMonitor:t.shared.monitors.FMPMonitor,report:function(){return t.instance("report")},sendEvent:null===(e=t.client)||void 0===e?void 0:e.sendEvent,captureException:function(e){return t.instance("Sentry",function(t){t.captureException(e)})},collect:t.shared.collect});r.init(),t.shared.monitors=ee(ee({},t.shared.monitors),r.getInstalledMonitors())}catch(o){t.instance("Sentry",function(t){t.captureException(o);try{t.withScope(function(e){e.setTag("from","slardar-sdk"),t.captureMessage("SLARDAR_ERROR: "+typeof n),t.captureMessage("SLARDAR_ERROR: "+n.toString())})}catch(e){t.withScope(function(n){n.setTag("from","slardar-sdk"),t.captureException(e)})}})}})},t.prototype.setCookie=function(t){t&&(document.cookie="MONITOR_WEB_ID="+t+";max-age=7776000;domain="+location.hostname+";path=/")},t.prototype.normalizeSetting=function(t){return{commonParams:this.getClientCommonParams(t),flags:this.getClientFlags(t),plugins:this.getClientPluginsSetting(t),monitors:this.getClientMonitorsSetting(t),custom:this.getClientCustom(t)}},t.prototype.normalizeServerSetting=function(t){return ce(t,"setting")?{commonParams:Vn(t),monitors:$n(t,this.getNormoalizeInfo())}:this.normalizeSetting({cookieid:t.cookieid,reportDomain:t.reportDomain,bid:t.bid,plugins:t.plugins})},t.prototype.mergeSettings=function(){var t=this.serverSetting?this.normalizeServerSetting(this.serverSetting):{},e=this.normalizeSetting(this.userConfig),n=pe(this.defaultClientConfig,t,e);n.commonParams.reportURLSingle=gn(n.commonParams.report_domain),n.commonParams.pid=this.getPid(n),this.shared.config=n,this.setBaseParams(),this.finalConfig=n},t.prototype.getPid=function(t){if(t.commonParams.pid)return t.commonParams.pid;var e=t.monitors.BaseMonitor;return 1===e.appTypeSetting.type&&"hash"===e.appTypeSetting.SPA?location.hash.slice(1)||"/":location.pathname},t.prototype.getClientCommonParams=function(t){return Vn(t)},t.prototype.getClientFlags=function(t){return Gn(t)},t.prototype.getClientCustom=function(t){var e={};return t.beforeSend&&ae(t.beforeSend)&&(e.beforeSend=t.beforeSend),e},t.prototype.getClientMonitorsSetting=function(t){return Qn({setting:t,info:this.getNormoalizeInfo()})},t.prototype.getClientPluginsSetting=function(t){return Wn(t)},t.prototype.getNormoalizeInfo=function(){return{web_id:this.finalConfig.commonParams.slardar_web_id,pid:this.finalConfig.commonParams.pid}},t.prototype.saveInstance=function(){window.__SLARDAR__||(window.__SLARDAR__={}),window.__SLARDAR__&&!le(window.__SLARDAR__.instances)&&(window.__SLARDAR__.instances=[]),window.__SLARDAR__&&le(window.__SLARDAR__.instances)&&window.__SLARDAR__.instances.push({version:this.version})},t}(),tr=Me;if(_e()){var er=new Zn;(tr=er.instance).version=er.version,tr.shared=er.shared,tr.SlardarBrowser=Zn,tr._baseParams=er.baseParams}var nr=tr,rr=Object.freeze({__proto__:null}),or=Object.freeze({__proto__:null}),ir=Object.freeze({__proto__:null});if("function"===typeof window.addEventListener){var ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];nr("precollect","error",t)};window.addEventListener("error",ar,!0),window.addEventListener("unhandledrejection",ar)}e.BrowserOptionTypes=or,e.BrowserReportTypes=ir,e.BrowserSlardar=Zn,e.BrowserTypes=rr,e.browserClient=Tn,e.browserConfig=In,e.browserNormalize=Kn,e.browserUtils=En,e.default=nr}).call(this,n(34))}}]);